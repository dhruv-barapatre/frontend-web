<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <dhruv></dhruv>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="icon"
        href="//commondeer.com/cdn/shop/files/Common_Deer_logo_hat_alone_eeea4a09-f05a-44fc-9bbc-abf623e369a6_32x32.png?v=1613756149">
</head>

<body>
    <div class="first">
        <nav class="store">
            <span class="text-center d-block p-2 text-light">STORE OPEN 10 - 5:30 daily, closed tuesdays
                ........... curious about exchanges? email hello@commondeer.com
            </span>
        </nav>
        <line></line>
    </div>

    <div class="second d-flex justify-content-center alig-items-center pt-2">
        <a href="index.html"><img
                src="https://commondeer.com/cdn/shop/files/email_header_b238e17b-a27a-4b69-a448-2a0fc254bc62_630x.png?v=1613756149"
                alt=""></a>
        <div class="side d-flex alig-items-center gap-3">
            <h6><a href="login.html">LOG IN <i class="bi bi-person"></i></a></h6>
            <button class="btn p-0 border-none" type="button" data-bs-toggle="offcanvas"
                data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">CART <i class="bi bi-bag"></i></button>
            <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight"
                aria-labelledby="offcanvasRightLabel">
                <div class="offcanvas-header">
                    <h5 id="offcanvasRightLabel">Offcanvas right</h5>
                    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"
                        aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <div class="cartfetch" id="cartfetch"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="menu">
        <ul>
            <li><a href="shoping-page.html">NEW !</a></li>
            <li><a href="shoping-page.html">GIFTS</a></li>
            <li><a href="shoping-page.html">CARDS</a></li>
            <li><a href="shoping-page.html">VERMONT</a></li>
            <li><a href="shoping-page.html">THE HOME</a></li>
            <li><a href="shoping-page.html">FUN</a></li>
            <li><a href="shoping-page.html">ACCESORIES</a></li>
            <li><a href="shoping-page.html">JWELLERY</a></li>
            <li><a href="shoping-page.html">KIDS</a></li>
            <li><a href="shoping-page.html">FOOD</a></li>
            <li><a href="shoping-page.html">OTHERS</a></li>
            <li><a href="shoping-page.html">ABOUT</a></li>
            <li><a href="shoping-page.html">SALE</a></li>
        </ul>
    </div>

    <div class="row justify-content-center mt-5 mb-5">
        <div class="col-6 justify-content-center" style="overflow: hidden;">
            <img id="image" class=" d-block m-auto "
                src="https://commondeer.com/cdn/shop/files/w81rz2nuig39re8m9jhe_540x.jpg?v=1717118355" alt=""
                width="80%" style="height: fit-content;">
        </div>
        <div class="col-6">
            <h3 id="title">VERMONT DOG EATS DOG TREATS - TICO'S TASTIES</h3>
            <hr>
            <h3>$<span id="price">12.00</span></h3>
            <hr>
            <button id="addToCart">ADD TO CART +</button>
            <hr>
            <p>Facebook Pinterest Email
                "It's just we're putting new coversheets on all the TPS reports before they go out now" We’ve all been
                one keystroke away from leaving it all behind. In those moments of despair lookup to that tropical
                underbrim and take 5... A beautiful Hoffman Fabrics aloha print reissued from their original 60’s design
                for the perfect, nostalgic coconut scented tropical feeling.</p>
            <p>ESCAPE (the bullshit) Made in Los Angeles, CA. USA</p>

            <p> - Lightweight 100% Cotton Ripstop / Premium Mesh Upper
                - Front Embroidery / Snapback Closure
                - Unstructured Vtg. Style Crushable Upper
                - Hoffman Aloha Print Underbrim/Fr. Lining</p>

            <p>Ampal Unstructured Fit - unstructured like a vintage baseball cap but deep like a trucker or fitted hat.

                Made in United States of America

                Thank you for supporting American Made.
                Goods Made Here.</p>
        </div>
    </div>

    <div class="b-color">
        <div class="row">
            <div class="col-2 col-sm-6 col-md-6 col-lg-2">
                <img width="100%" style="height: fit-content;"
                    src="https://commondeer.com/cdn/shop/files/CDeer_background_removed_360x.png?v=1613756365" alt="">
                <span>© 2024, Common Deer
                    POS and Ecommerce by Shopify</span>
            </div>
            <div class="col-2 col-sm-6 col-md-6 col-lg-2">
                <ul>
                    <li><a href="">About</a></li>
                    <li><a href="">Contact Us</a></li>
                    <li><a href="">Exchanges,Shipping, Pickup, etc</a></li>
                    <li><a href="">New Maker Application</a></li>
                    <li><a href="">Jobs/a></li>
                    <li><a href="">Terms & Conditions</a></li>
                    <li><a href="">Privacy Policy</a></li>
                </ul>
            </div>
            <div class="col-2 col-sm-6 col-md-6 col-lg-2">
                <p>Our woman-owned small business and the family of makers we support rely on people like you to stay
                    afloat.</p>
                <p>Thank you for celebrating American Made with us.</p>
                <p><u>our current "open" hours</u></p>
            </div>
            <div class="col-2 col-sm-6 col-md-6 col-lg-2">
                <p>210 College Street, Suite 101
                    dhruv, VT Vermont
                    05401 United States
                </p>
                <div class="btns">
                    <div class="fb"><i class="bi bi-facebook"></i></div>
                    <div class="in"><i class="bi bi-instagram"></i></div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    fetch('https://dhruv-web-backend.onrender.com/cart')
        .then(res => res.json())
        .then(json => cartlist(json))
        .catch(err => console.log(err))

    function cartlist(data) {
        let store = data.map(e => cartData(e.image, e.product_title, e.price, e.id))
        document.getElementById('cartfetch').innerHTML = store.join("")
        attachDeleteEventListeners();
    }

    function cartData(image, product_title, price, id) {
        return `
            <div class="cart-item" data-id="${id}">
                <img class="d-block m-auto mt-3" src="${image}" alt="">
                <h4 class="m-auto">${product_title}</h4>
                <div class="d-flex align-items-center justify-content-evenly gap-3">
                    <p class="align-items-center">$${price}</p>
                    <a class="justify-content-center del-btn" data-id="${id}">Delete <i class="bi bi-trash"></i></a>
                </div>
            </div>`;
    }

    function attachDeleteEventListeners() {
        const deleteButtons = document.querySelectorAll('.del-btn');
        deleteButtons.forEach(button => {
            button.addEventListener('click', function () {
                const id = this.getAttribute('data-id');
                deleteCartItem(id);
            });
        });
    }

    function deleteCartItem(id) {
        fetch(`https://dhruv-web-backend.onrender.com/cart/${id}`, {
            method: 'DELETE'
        })
            .then(res => res.json())
            .then(() => {
                document.querySelector(`.cart-item[data-id="${id}"]`).remove();
                alert('Item deleted from cart');
            })
            .catch(err => console.log(err))
    }

    let params = new URLSearchParams(window.location.search);
    document.getElementById("image").src = params.get("image");
    document.getElementById("title").innerText = params.get("product_title");
    document.getElementById("price").innerText = params.get("price");

    document.getElementById("addToCart").addEventListener("click", () => {
        let addCartData = {
            image: params.get("image"),
            product_title: params.get("product_title"),
            price: params.get("price"),
            id: params.get("id")
        }
        fetch("https://dhruv-web-backend.onrender.com/cart", {
            method: "POST",
            headers: {
                "Content-type": "application/json"
            },
            body: JSON.stringify(addCartData)
        }).then(res => res.json())
            .then(json => {
                alert("Data Added To Cart");
                window.location.reload();
            })
            .catch(err => console.log(err))
    });
</script>


</html>